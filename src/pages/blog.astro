---
import Layout from '../layouts/Layout.astro';
import { getCollection } from "astro:content";

const pageTitle = "我的 Astro 学习博客";
// const allPosts = Object.values(import.meta.glob('./posts/*.md', { eager: true }));
const allPosts = await getCollection("blog");
---

<Layout title={pageTitle}>
  <h1>{pageTitle}</h1>
  <p>在这里，我将分享我的 Astro 学习之旅。</p>

  <ul>
    <!-- <li><a href="/posts/post-1/">文章 1</a></li>
    <li><a href="/posts/post-2/">文章 2</a></li>
    <li><a href="/posts/post-3/">文章 3</a></li> -->
    {allPosts.map(
      (post: any) => 
        <li>
          {/* <a href={post.url}>{post.frontmatter.title}</a> */}
          <a href={`/posts/${post.id}`}>{post.data.title}</a>
        </li>
    )}
  </ul>
</Layout>
